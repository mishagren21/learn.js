<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>okoprom</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link
            href="https://fonts.googleapis.com/css2?family=Golos+Text&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="./index.css" />
    </head>

    <body>
        <header>
            <div class="max-content">
                <div class="left-side">
                    <img src="./img/logo.png" />
                </div>
                <div class="right-side">
                    <div class="contacts">
                        <a href="#">okoprom@gmail.com</a>
                        <a href="#">+7 (800) 707-31-01</a>
                    </div>
                    <div class="more">
                        <a href="#">Доставка и оплата</a>
                        <a href="#">Гарантия</a>
                    </div>
                </div>
            </div>
        </header>
        <div class="menu">
            <ul class="links">
                <li><a href="#">Каталог</a></li>
                <li><a href="#">Наше производство</a></li>
                <li><a href="#">О компании</a></li>
                <li><a href="#">Контакты</a></li>
            </ul>
            <div class="search-buttons">
                <button class="logo-btn">
                    <img src="./img/search.png" alt="search" />
                </button>
                <button class="logo-btn">
                    <img src="./img/vector.png" alt="vector" />
                </button>
                <button class="advice">Запросить консультацию</button>
            </div>
        </div>
        <div class="section-1">
            <div class="product-card">
                <div class="hight-side">
                    <div class="specs">
                        <h2>Новый зверь<br />для всех типов кабелей</h2>
                        <div class="spec-row">
                            <label>Диаметр обработки</label>
                            <input
                                type="text"
                                value="от 1,5 до 130мм"
                                readonly
                            />
                        </div>
                        <div class="spec-row">
                            <label>Размеры</label>
                            <input type="text" value="90*68*120 см" readonly />
                        </div>
                        <div class="spec-row">
                            <label>Мощность</label>
                            <input type="text" value="3 кВт 380 В" readonly />
                        </div>
                        <div class="price">209 000 ₽</div>
                    </div>
                    <div class="image">
                        <img src="./img/machine.png" />
                    </div>
                </div>
                <div class="buttons">
                    <button>Подробнее</button>
                    <div class="sides-buttons">
                        <button><img src="./img/left.png" /></button>
                        <button><img src="./img/right.png" /></button>
                    </div>
                </div>
            </div>
            <div class="commodity">
                <div class="title-container">
                    <h1>
                        Сепараторы, конвейеры, шнековые<br />
                        транспортеры и линии для переработки
                    </h1>
                    <p>
                        Мы на связи всегда и разберемся с любыми вопросами
                        возникшими во время<br />
                        эксплуатации нашего оборудования.
                    </p>
                </div>
                <div class="things">
                    <div class="block">
                        <h2>Станки для разделки кабеля</h2>
                        <img src="./img/machine-small.png" />
                    </div>
                    <div class="block">
                        <h2>Сепараторы</h2>
                        <img src="./img/machine-blue.png" />
                    </div>
                    <div class="block">
                        <h2>Станок для разделки теплообменников</h2>
                        <img src="./img/machine-black.png" />
                    </div>

                    <div class="block">
                        <h2>Рфзделка радиаторов</h2>
                        <img src="./img/radiator.png" />
                    </div>
                    <div class="block">
                        <h2>Запасные запчасти</h2>
                        <img src="./img/things.png" />
                    </div>
                    <div class="block">
                        <h2>Дргое</h2>
                        <img src="./img/other.png" />
                    </div>
                </div>
            </div>
            <div class="about-us">
                <div class="title-container">
                    <h1>
                        Ваша рост – наш интерес, ведь тогда нам<br />
                        будет к чему стремиться
                    </h1>
                </div>
                <div class="aspire">
                    <div class="left-containers">
                        <div class="container">
                            <img src="./img/headphones.png" />
                            <div class="text-container">
                                <h2>Всегда на связи</h2>
                                <p>
                                    Консультируем при покупке<br />
                                    и в дальнейшем при эксплуатации<br />
                                    нашего оборудования
                                </p>
                            </div>
                        </div>
                        <div class="container">
                            <img src="./img/car.png" />
                            <div class="text-container">
                                <h2>Доставка по всей России</h2>
                                <p>
                                    Отправим товар транспортной<br />
                                    компанией или почтовым<br />
                                    отправлением (оплата при получении)
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="middel-container">
                        <div class="container">
                            <img src="./img/bag.png" />
                            <div class="text-container">
                                <h2>Опыт в сфере</h2>
                                <p>
                                    Большой опыт в переработке<br />
                                    вторсырья позволяет глубоко изучать<br />
                                    проблемы и находить лучшие решения
                                </p>
                            </div>
                        </div>
                        <div class="container">
                            <img src="./img/sides.png" />
                            <div class="text-container">
                                <h2>Аренда станков</h2>
                                <p>
                                    Станки можно брать на временное<br />
                                    использование с залогом
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="right-containers">
                        <div class="container">
                            <img src="./img/settings.png" />
                            <div class="title-container">
                                <h2>Наличие запчастей</h2>
                                <p>
                                    Преимуществом производства своими<br />
                                    силами является замена любых<br />
                                    комплектующих и ремонт при поломке
                                </p>
                            </div>
                        </div>
                        <div class="container">
                            <img src="./img/comeback.png" />
                            <div class="text-container">
                                <h2>Гарантия на всё</h2>
                                <p>
                                    Предоставляется гарантия сроком<br />
                                    до 1 года со дня приобретения товара
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="why-we">
                <div class="description">
                    <h1>Почему именно мы?</h1>
                    <p>
                        За долгое время работы в этой области у нас более одной
                        тысячи клиентов в базе в том числе и представленные
                        выше. В основном это компании по переработке вторсырья.
                        Мы уже прошли тот путь который вам предстоит пройти
                        после приобретения нашей продукции и лучше подскажем:
                        что вам лучше подойдет, чего надо избегать и как более
                        эффективно использовать то что есть.
                    </p>
                </div>
                <div class="logos">
                    <img src="./img/logo-rf.png" />
                    <img src="./img/logo-moscow.png" />
                    <img src="./img/olimpiyski.png" />

                    <img src="./img/logo-btm.png" />
                    <img src="./img/logo-ymz.png" />
                    <img src="./img/logo-vtorchermet.png" />
                </div>
            </div>
            <div class="contact-form">
                <div class="max-content">
                    <div class="contact-text">
                        <h2>
                            Будем рады ответить<br />на все интересующие<br />
                            вопросы
                        </h2>
                        <p>
                            Оставьте заявку и мы вам вскоре позвоним<br />и
                            проконсультируем по всем интересующим вопросам
                        </p>
                    </div>
                    <form class="form-fields">
                        <input type="text" placeholder="Ваше имя" required />
                        <input
                            type="tel"
                            placeholder="+7 (___) ___-__-__"
                            required
                        />
                        <input
                            type="email"
                            placeholder="E-mail (необязательно)"
                        />
                        <button type="submit">Отправить</button>
                    </form>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="width-container">
                <div class="logo-img">
                    <img src="./img/logo.png" />
                </div>
                <div class="finishing">
                    <div class="info">
                        <h1>
                            Тураевское шоссе дом 17, д.<br />
                            Островцы, Раменский район,<br />
                            МО, Россия
                        </h1>
                        <div class="contacts">
                            <h1>+7 (800) 707-31-01</h1>
                            <h1>okoprom@gmail.com</h1>
                        </div>
                        <div class="social-buttons">
                            <button>Whatsapp</button>
                            <button>Telegram</button>
                        </div>
                    </div>
                    <div class="functions">
                        <ul class="our-products">
                            <h1>Наша продукция</h1>
                            <li><a href="#">Для разделки кабеля</a></li>
                            <li><a href="#">Сепараторы</a></li>
                            <li>
                                <a href="#"
                                    >Для разделки<br />теплообменников</a
                                >
                            </li>
                            <li><a href="#">Радиаторов</a></li>
                            <li><a href="#">Части</a></li>
                            <li><a href="#">Другое</a></li>
                        </ul>
                        <ul class="information">
                            <h1>Информация</h1>
                            <li><a href="#">Доставка и оплата</a></li>
                            <li><a href="#">Гарантия</a></li>
                            <li><a href="#">Служба контроля качества</a></li>
                            <li><a href="#">Наше производство</a></li>
                            <li><a href="#">О компании</a></li>
                            <li><a href="#">Контакты</a></li>
                        </ul>
                    </div>
                </div>
                <div class="blogs">
                    <div class="blogs-buttoms">
                        <button><img src="./img/instagram-card.png" /></button>
                        <button><img src="./img/youtube-card.png" /></button>
                    </div>
                    <p>
                        Подписывайтесь на нас<br />
                        в социальных сетях
                    </p>
                </div>
                <div class="rules">
                    <p>Интернет магазин "Окопром" © 2021 Все права защищены</p>
                    <p>Политика конфиденциальности</p>
                </div>
            </div>
        </div>
        <div class="section-2">
            <div class="delivery">
                <div class="container">
                    <img src="./img/headphones.png" />
                    <div class="text-container">
                        <h2>Всегда на связи</h2>
                        <p>
                            Консультируем при покупке<br />
                            и в дальнейшем при эксплуатации<br />
                            нашего оборудования
                        </p>
                    </div>
                </div>
                <div class="container">
                    <img src="./img/car.png" />
                    <div class="text-container">
                        <h2>Доставка по всей России</h2>
                        <p>
                            Отправим товар транспортной<br />
                            компанией или почтовым<br />
                            отправлением (оплата при получении)
                        </p>
                    </div>
                </div>
                <div class="container">
                    <img src="./img/comeback.png" />
                    <div class="text-container">
                        <h2>Гарантия на всё</h2>
                        <p>
                            Предоставляется гарантия сроком<br />
                            до 1 года со дня приобретения товара
                        </p>
                    </div>
                </div>
            </div>
            <div class="all-production">
                <div class="title-container">
                    <h1>Вся продукция</h1>
                    <p>126 товара</p>
                </div>
                <div class="main">
                    <div class="buttons-menu">
                        <button class="production" onclick="showFilterDialog()">
                            Вся продукция<img src="./img/kvadrat.png" />
                        </button>
                        <button class="discounts">Скидки <span>%</span></button>
                        <button>Станки для разделки кабеля</button>
                        <button>Сепараторы / Дробилки для кабеля</button>
                        <button>Запасные части</button>
                        <button>Станки для разделки теплообменников</button>
                        <button>Разделка радиаторов</button>
                        <button>Другое</button>
                    </div>
                    <div class="catalog-container">
                        <div id="selected-filters"></div>
                        <div class="catalog" id="catalog">
                            <div class="container-button">
                                <button>Показать ещё</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="contact-form">
                <div class="contact-text">
                    <h2>
                        Будем рады ответить<br />на все интересующие<br />
                        вопросы
                    </h2>
                    <p>
                        Оставьте заявку и мы вам вскоре позвоним<br />и
                        проконсультируем по всем интересующим вопросам
                    </p>
                </div>
                <form class="form-fields">
                    <input type="text" placeholder="Ваше имя" required />
                    <input
                        type="tel"
                        placeholder="+7 (___) ___-__-__"
                        required
                    />
                    <input type="email" placeholder="E-mail (необязательно)" />
                    <button type="submit">Отправить</button>
                </form>
            </div>
        </div>
        <div class="footer">
            <div class="width-container">
                <div class="logo-img">
                    <img src="./img/logo.png" />
                </div>
                <div class="finishing">
                    <div class="info">
                        <h1>
                            Тураевское шоссе дом 17, д.<br />
                            Островцы, Раменский район,<br />
                            МО, Россия
                        </h1>
                        <div class="contacts">
                            <h1>+7 (800) 707-31-01</h1>
                            <h1>okoprom@gmail.com</h1>
                        </div>
                        <div class="social-buttons">
                            <button>Whatsapp</button>
                            <button>Telegram</button>
                        </div>
                    </div>
                    <div class="functions">
                        <ul class="our-products">
                            <h1>Наша продукция</h1>
                            <li><a href="#">Для разделки кабеля</a></li>
                            <li><a href="#">Сепараторы</a></li>
                            <li>
                                <a href="#"
                                    >Для разделки<br />теплообменников</a
                                >
                            </li>
                            <li><a href="#">Радиаторов</a></li>
                            <li><a href="#">Части</a></li>
                            <li><a href="#">Другое</a></li>
                        </ul>
                        <ul class="information">
                            <h1>Информация</h1>
                            <li><a href="#">Доставка и оплата</a></li>
                            <li><a href="#">Гарантия</a></li>
                            <li><a href="#">Служба контроля качества</a></li>
                            <li><a href="#">Наше производство</a></li>
                            <li><a href="#">О компании</a></li>
                            <li><a href="#">Контакты</a></li>
                        </ul>
                    </div>
                </div>
                <div class="blogs">
                    <div class="blogs-buttoms">
                        <button><img src="./img/instagram-card.png" /></button>
                        <button><img src="./img/youtube-card.png" /></button>
                    </div>
                    <p>
                        Подписывайтесь на нас<br />
                        в социальных сетях
                    </p>
                </div>
                <div class="rules">
                    <p>Интернет магазин "Окопром" © 2021 Все права защищены</p>
                    <p>Политика конфиденциальности</p>
                </div>
            </div>
        </div>

        <dialog id="myDialog">
            <label for="select">Choose</label>
            <select name="labels" id="filterSelect"></select>
            <br /><br />
            <button type="button" onclick="selectFilter()">
                Save and Close
            </button>
        </dialog>

        <script>
            function subtractPercent(amount, percent = 0) {
                return amount - (amount * percent) / 100;
            }
            const generateCatalogTemplate = (items = []) => {
                let generatedHtml = "";
                items.forEach((item) => {
                    let tags = "";
                    item?.tags?.forEach(
                        (tag) =>
                            (tags += `<span class="tag ${tag.value}">${tag.label}</span>`),
                    );
                    generatedHtml += `
                      <a href="./item-detail.html?id=${item.id}" class="item" data-id=${item.id}>
                          <div class="image-container">
                              <div class="tags-container">
                                ${tags}
                              </div>
                              <img src=${item.img}>
                          </div>
                          <div class="text-container">
                              <h1>${item.name}</h1>
                              <div class="text">
                                  <div class="line">
                                      <p class="label">Вес</p>
                                      <p class="value">${item.weightKg}</p>
                                  </div>
                                  <div class="line">
                                      <p class="label">Двигатель</p>
                                      <p class="value">${item.motor.voltage}</p>
                                  </div>
                                  <div class="line">
                                      <p class="label">Диам. Обраб.</p>
                                      <p class="value">${item.motor.diametr}</p>
                                  </div>
                              </div>
                              <div class="price">
                                  <p>${item.price} ₽</p>
                                  ${item?.discount ? `<p class="discount">${subtractPercent(item.price, item.discount)} ₽</p>` : ""}
                              </div>
                              <button>Купить</button>
                            </div>
                        </a>
                    `;
                });
                return generatedHtml;
            };

            const catalog = document.querySelector("#catalog");
            const dialog = document.querySelector("#myDialog");
            const filterSelect = document.querySelector("#filterSelect");
            const selectFilters = document.querySelector("#selected-filters");

            const searchParams = new URLSearchParams(window.location.search);
            console.log(searchParams.get("foo")); // a

            let generatedHtml = generateCatalogTemplate(items);
            let generatedTagsHtml = "";
            const allTags = [];

            items.forEach((item) => {
                if (item.tags) {
                    item.tags.forEach((newTag) => {
                        if (!allTags.includes(newTag.label)) {
                            allTags.push(newTag.label);
                        }
                    });
                }
            });

            allTags.forEach((item) => {
                generatedTagsHtml += `<option value='${item}'>${item}</option>`;
            });

            const clearFilter = () => {
                selectFilters.innerHTML = "";

                const generatedHtml = generateCatalogTemplate(items);

                const url = new URL(window.location);
                url.searchParams.delete("tag");
                window.history.pushState({}, "", url);

                catalog.innerHTML = generatedHtml;
            };

            const selectFilter = () => {
                if (filterSelect.value) {
                    const filteredItems = items.filter((item) => {
                        if (!item.tags) return false;
                        return item.tags.find(
                            (tag) =>
                                tag.label.toLowerCase() ===
                                filterSelect.value.toLowerCase(),
                        );
                    });

                    const url = new URL(window.location);
                    url.searchParams.set("tag", filterSelect.value);
                    window.history.pushState({}, "", url);

                    selectFilters.innerHTML = `
                      <span>
                          ${filterSelect.value}
                          <button type="button" class="closeBtn" onclick='clearFilter()'>Close</button>
                      </span>`;

                    const generatedHtml =
                        generateCatalogTemplate(filteredItems);

                    catalog.innerHTML = generatedHtml;
                }
                dialog.close();
            };

            catalog.innerHTML = generatedHtml;
            filterSelect.innerHTML = generatedTagsHtml;

            function showFilterDialog() {
                dialog.showModal();
            }

            function closeFilterDialog() {
                dialog.close();
            }

            dialog.close();

            

            import {items} from "./data.js";
           console.log(items);


           const container = document.querySelector("#catalog");

function renderItems(items) {
  container.innerHTML = ""; 

  items.forEach(item => {
   
    const tagsHTML = item.tags
      ? item.tags.map(tag => `<span class="tag ${tag.value}">${tag.label}</span>`).join("")
      : "";

   
    const card = `
      <div class="item-card" data-id="${item.id}">
        <img src="${item.img}" alt="${item.name}">
        <h3>${item.name}</h3>

        <div class="tags">
          ${tagsHTML}
        </div>

        <p>Вага: ${item.weightKg}</p>
        <p>Мотор: ${item.motor.voltage}, ${item.motor.diametr}</p>
        <p class="price">${item.price} грн</p>
      </div>
    `;

    container.innerHTML += card;
  });
}

renderItems(items);


        </script>
    </body>
</html>
